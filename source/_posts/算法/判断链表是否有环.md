---
title: 判断链表是否有环
date: 2021-06-02 14:23:28
toc: true
comments: true
tags:
  - 算法
---

```java
/**
 * 判断链表是否有环
 *
 * @author lilou
 * @since 2021/6/2
 */
public class Ring {
    public static class Node {
        private final Integer id;
        private final String name;
        private Node next;

        public Node(Integer id, String name) {
            this.id = id;
            this.name = name;
        }

        public Integer getId() {
            return id;
        }

        public String getName() {
            return name;
        }

        public Node getNext() {
            return next;
        }

        public void setNext(Node next) {
            this.next = next;
        }
    }

    public static void main(String[] args) {
        final Node n1 = new Node(1, "赵云");
        final Node n2 = new Node(2, "关羽");
        final Node n3 = new Node(3, "张飞");
        final Node n4 = new Node(4, "刘备");
        final Node n5 = new Node(5, "曹操");
        n1.setNext(n2);
        n2.setNext(n3);
        n3.setNext(n4);
        n4.setNext(n5);
        n5.setNext(n1);

        boolean isRing = isRing2(n1);
        System.out.println(isRing);
    }

    /**
     * 方法1：快慢指针
     *
     * @param n1 节点
     * @return 是否有环
     */
    private static boolean isRing(Node n1) {
        if (n1 == null) {
            return false;
        }

        // 慢指针
        Node slow = n1;
        // 快指针，从下一个开始
        Node fast = n1.getNext();
        while (fast != null && fast.getNext() != null) {
            if (fast == slow) {
                return true;
            }
            slow = slow.getNext();
            fast = fast.getNext().getNext();
        }

        return false;
    }

    /**
     * 方法2：
     * 1个指针原地不动，
     * 1个指针一步一步向前搜索
     *
     * @param n1 节点
     * @return 是否有环
     */
       private static boolean isRing2(Node n1) {
        if (n1 == null) {
            return false;
        }
        // 原地不动
        Node notMovePointer = n1;
        // 步长为1，向前搜索
        Node forwardPointer = n1.getNext();
        while (forwardPointer != null) {
            if (notMovePointer == forwardPointer) {
                return true;
            }
            forwardPointer = forwardPointer.getNext();
        }

        return false;
    }
}

```
