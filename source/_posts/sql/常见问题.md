---
title: 【sql】常见问题列表
date: 2019-07-26 13:59:33
toc: true
comments: true
tags:
  - sql
  - mysql
---

## 死锁

解决思路就是：避免同时操作数据；

- [Mysql 并发时经典常见的死锁原因及解决方法 - 泽锦 - 博客园](https://www.cnblogs.com/zejin2008/p/5262751.html)

首先我们执行
`show engine innodb status\G;`
查看死锁情况，也可以
`mysql -u root -p --execute="show engine innodb status \G"> c:/mysql.log`
把死锁信息输出到本地磁盘，查看起来比较方便
[mysql 死锁分析 - 那片天空！那片海！ - CSDN 博客](https://blog.csdn.net/weixin_38250126/article/details/70053222)

**例如：**

通过定位死锁的数据库： `show engine \G`，发现一个统计任务、一个改价任务，同时修改同一个端口的内容，导致死锁。

解决方法：将两个任务的时间错开，改价的为每分钟的 0 秒触发；统计的为每两分钟的 30 秒触发；

## 日志文件被删除后，无法正常启动

通过`systemctl status mariadb.service`来查看缺少什么文件，创建对应的即可，
如果是权限问题，把外层的文件夹修改下权限 `/var/log/mysql`。
然后重启： `systemctl restart mariadb.service`