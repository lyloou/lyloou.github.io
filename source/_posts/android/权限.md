---
title: 权限问题
date: 2018-08-30 11:58:08
toc: true
comments: true
tags:
- android
---

参考资料：[Android 6.0 动态权限申请详解 - Android移动开发技术文章_手机开发 - 红黑联盟](https://www.2cto.com/kf/201611/561860.html)
```java
 @TargetApi(Build.VERSION_CODES.M)
private void requestPermission() {
    if (ContextCompat.checkSelfPermission(mContext, Manifest.permission.CAMERA)
            == PackageManager.PERMISSION_GRANTED
            && ContextCompat.checkSelfPermission(mContext, Manifest.permission.WRITE_EXTERNAL_STORAGE)
            == PackageManager.PERMISSION_GRANTED
            && ContextCompat.checkSelfPermission(mContext, Manifest.permission.READ_EXTERNAL_STORAGE)
            == PackageManager.PERMISSION_GRANTED) {
        // doSthHere();
    } else {
        //申请相机权限和STORAGE权限
        ActivityCompat.requestPermissions(
                mContext,
                new String[]{Manifest.permission.CAMERA,
                        Manifest.permission.WRITE_EXTERNAL_STORAGE,
                        Manifest.permission.READ_EXTERNAL_STORAGE
                },
                CAMERA_REQUEST_CODE);
    }
}

@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    if (requestCode == CAMERA_REQUEST_CODE) {
        if (grantResults[0] == PackageManager.PERMISSION_GRANTED
                && grantResults[1] == PackageManager.PERMISSION_GRANTED
                && grantResults[2] == PackageManager.PERMISSION_GRANTED) {
            // doSthHere();
        } else {
            String msg = "没有相关运行权限";
            Toast.makeText(mContext, msg, Toast.LENGTH_SHORT).show();
        }
    }
}
```