---
title: 分布式事务
date: 2021-06-17 10:23:30
toc: true
comments: true
tags:
  - business
---

### （AT、TCC、Saga、XA）模式分析

> 四种分布式事务模式，分别在不同的时间被提出，每种模式都有它的适用场景
>
> - AT 模式是无侵入的分布式事务解决方案，适用于不希望对业务进行改造的场景，几乎 0 学习成本。
> - TCC 模式是高性能分布式事务解决方案，适用于核心系统等对性能有很高要求的场景。
> - Saga 模式是长事务解决方案，适用于业务流程长且需要保证事务最终一致性的业务系统，Saga 模式一阶段就会提交本地事务，无锁，长流程情况下可以保证性能，多用于渠道层、集成层业务系统。事务参与者可能是其它公司的服务或者是遗留系统的服务，无法进行改造和提供 TCC 要求的接口，也可以使用 Saga 模式。
> - XA 模式是分布式强一致性的解决方案，但性能低而使用较少。

- [分布式事务的 4 种模式 - 知乎](https://zhuanlan.zhihu.com/p/78599954)

- [分布式事务 Seata Saga 模式首秀以及三种模式详解 | Meetup#3 回顾](https://juejin.cn/post/6844903913691283469)

- [分布式事务 Seata 三种模式详解 - 活动回顾](https://tech.antfin.com/community/activities/779/review/901)

- [Seata 是什么](http://seata.io/zh-cn/docs/overview/what-is-seata.html)

> 由于 Saga 不保证隔离性，所以我们在业务设计的时候需要做到“宁可长款，不可短款”的原则，长款是指在出现差错的时候站在我方的角度钱多了的情况，钱少了则是短款，因为如果长款可以给客户退款，而短款则可能钱追不回来了，也就是说在业务设计的时候，一定是先扣客户帐再入帐，如果因为隔离性问题造成覆盖更新，也不会出现钱少了的情况。
