<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lyloou.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="&#x2F;* Better than last best *&#x2F;">
<meta property="og:type" content="website">
<meta property="og:title" content="lyloou">
<meta property="og:url" content="https://lyloou.com/page/12/index.html">
<meta property="og:site_name" content="lyloou">
<meta property="og:description" content="&#x2F;* Better than last best *&#x2F;">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="lyloou">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lyloou.com/page/12/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/12/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>lyloou</title>
  
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-80542932-1","only_pageview":true}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">lyloou</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lyloou"
      src="/assets/images/avatar.png">
  <p class="site-author-name" itemprop="name">lyloou</p>
  <div class="site-description" itemprop="description">/* Better than last best */</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">312</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lyloou" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lyloou" rel="noopener me" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lyloou6@gmail.com" title="E-Mail → mailto:lyloou6@gmail.com" rel="noopener me" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/lyloou" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;lyloou" rel="noopener me" target="_blank"><i class="weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/ly1414725328" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;ly1414725328" rel="noopener me" target="_blank"><i class="csdn fa-fw"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/linux/sftp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/linux/sftp/" class="post-title-link" itemprop="url">Sftp</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-05 08:38:15" itemprop="dateCreated datePublished" datetime="2019-04-05T08:38:15+08:00">2019-04-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="帮助文档"><a href="#帮助文档" class="headerlink" title="帮助文档"></a>帮助文档</h2><p>sftp&gt; help</p>
<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><p>类似 <code>ssh</code> 的用法</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp lilou@192.168.0.1</span><br></pre></td></tr></table></figure>

<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table>
<thead>
<tr>
<th>命令描述</th>
<th>命令（远程/本地)</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>切换目录</td>
<td>cd/lcd</td>
<td>cd /tmp</td>
</tr>
<tr>
<td>显示目录</td>
<td>pwd/lpwd</td>
<td>pwd</td>
</tr>
<tr>
<td>下载到本地</td>
<td>get</td>
<td><code>get a.txt</code> <code>get -r /tmp/dir/ /local/tmp/dir</code></td>
</tr>
<tr>
<td>上传到远程</td>
<td>put</td>
<td><code>put a.txt a.txt</code> <code>put -r /local/tmp/dir/ /tmp/dir/</code></td>
</tr>
</tbody></table>
<h2 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.zfanw.com/sftp/#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9">SFTP 用法</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chen1987lei/archive/2010/11/26/1888391.html">linux 下如何使用 sftp 命令 - BradyChen - 博客园</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/java/JVM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/JVM/" class="post-title-link" itemprop="url">JVM</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-01 16:41:34" itemprop="dateCreated datePublished" datetime="2019-04-01T16:41:34+08:00">2019-04-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="查看堆栈信息"><a href="#查看堆栈信息" class="headerlink" title="查看堆栈信息"></a>查看堆栈信息</h2><h3 id="查看当前机器上运行的-java-进程"><a href="#查看当前机器上运行的-java-进程" class="headerlink" title="查看当前机器上运行的 java 进程"></a>查看当前机器上运行的 java 进程</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013891584/article/details/80983494">JVM–查看堆栈信息<em>u013891584 的博客-CSDN 博客</em>如何查看堆栈信息</a></p>
<p><code>jps -lvm</code><br>命令格式 jps [options][hostid]<br>注：如果不指定 hostid 就默认为当前主机或服务器。<br>命令行参数选项说明如下：<br>-q 不输出类名、Jar 名和传入 main 方法的参数<br>-m 输出传入 main 方法的参数<br>-l 输出 main 类或 Jar 的全限名<br>-v 输出传入 JVM 的参数</p>
<p><code>jstat -gc 21275</code><br>-gc 垃圾回收堆的行为统计，常用命令<br><img src="https://cdn.jsdelivr.net/gh/lyloou/img/img/20210702091905.png" alt="JVM_2020-08-11-15-37-17"><br>C 即 Capacity 总容量，U 即 Used 已使用的容量<br>S0C : survivor0 区的总容量<br>S1C : survivor1 区的总容量<br>S0U : survivor0 区已使用的容量<br>S1C : survivor1 区已使用的容量<br>EC : Eden 区的总容量<br>EU : Eden 区已使用的容量<br>OC : Old 区的总容量<br>OU : Old 区已使用的容量<br>MC：方法区大小<br>MU：方法区使用大小<br>CCSC:压缩类空间大小<br>CCSU:压缩类空间使用大小<br>YGC : 新生代垃圾回收次数<br>YGCT : 新生代垃圾回收时间<br>FGC : 老年代垃圾回收次数<br>FGCT : 老年代垃圾回收时间<br>GCT : 垃圾回收总消耗时间</p>
<p><code>jstat -gc 1262 2000 20</code><br>这个命令意思就是每隔 2000ms 输出 1262 的 gc 情况，一共输出 20 次</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Daybreak1209/article/details/80540360">JVM 堆、栈信息监测<em>Think In JAVA—Max-CSDN 博客</em>查看 jvm 堆栈信息</a><br><img src="https://cdn.jsdelivr.net/gh/lyloou/img/img/20210702091918.png" alt="JVM_2020-08-11-15-45-17"></p>
<h2 id="Class-文件字节码结构示意图"><a href="#Class-文件字节码结构示意图" class="headerlink" title="Class 文件字节码结构示意图"></a>Class 文件字节码结构示意图</h2><p><img src="https://github.com/lyloou/img/raw/develop/z/20191023193030.png" alt="this is an image"></p>
<h2 id="visualvm-plugin"><a href="#visualvm-plugin" class="headerlink" title="visualvm plugin"></a>visualvm plugin</h2><p><a target="_blank" rel="noopener" href="https://visualvm.github.io/pluginscenters.html">https://visualvm.github.io/pluginscenters.html</a><br>(注意如果是用 jvisualvm，要选择<code>Java VisualVM</code>的地址))</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://howtodoinjava.com/java/basics/jdk-jre-jvm/">What is Java JDK, JRE and JVM - In-depth Analysis - HowToDoInJava</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ibm.com/support/knowledgecenter/en/SSYKE2_8.0.0/com.ibm.java.vm.80.doc/docs/jit_optimize.html">How the JIT compiler optimizes code</a></li>
</ul>
<h2 id="JVM-相关问题"><a href="#JVM-相关问题" class="headerlink" title="JVM 相关问题"></a>JVM 相关问题</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; vi /etc/supervisord.conf</span></span><br><span class="line"><span class="section">[program:xxl-job-admin-7005]</span></span><br><span class="line"><span class="attr">command</span>=java -XX:-UseGCOverheadLimit -jar /data/www/xxl-job-admin/xxl-job-admin-<span class="number">7005</span>.jar --server.port=<span class="number">7005</span></span><br><span class="line"><span class="attr">autostart</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">autorestart</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">user</span> = omadmin</span><br><span class="line"><span class="attr">redirect_stderr</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">stdout_logfile_maxbytes</span>=<span class="number">100</span>MB</span><br><span class="line"><span class="attr">stdout_logfile</span> = /data/log/xxl-job-admin/xxl-job-admin.log</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/casablancaagnes_3sdf/article/details/52299100">-XX:-UseGCOverheadLimit 参数 java.lang.OutOfMemoryError：GC overhead limit exceeded 填坑心得_cas3$#%nca%6nes_3sdf 的博客-CSDN 博客_usegcoverheadlimit 有什么作用</a></p>
<h2 id="JVM-垃圾回收-之-强引用、弱引用、软引用、虚引用-cyt-CSDN-博客"><a href="#JVM-垃圾回收-之-强引用、弱引用、软引用、虚引用-cyt-CSDN-博客" class="headerlink" title="JVM 垃圾回收 之 强引用、弱引用、软引用、虚引用_cyt-CSDN 博客"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41291945/article/details/108549120">JVM 垃圾回收 之 强引用、弱引用、软引用、虚引用_cyt-CSDN 博客</a></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strong</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 强引用 是最常见的引用， 首先用 new 关键字创建对象的时候</span></span><br><span class="line"><span class="comment">     * 这个对象就是一个强引用也就是默认的引用类型。 只要强引用的对象</span></span><br><span class="line"><span class="comment">     * 是可触及的， 那么他就不会被回收！如果强引用对象超过了他的作用范围</span></span><br><span class="line"><span class="comment">     * 或者被设置为 null  那就可以被回收了。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 只要有强引用在， 当内存不足的时候jvm就算抛出OOM也不会回收掉它！</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">test_strong_reference</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;test strong reference&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">test</span> <span class="operator">=</span> test_strong_reference;</span><br><span class="line">        test_strong_reference = <span class="literal">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;test_strong_reference - &gt; &quot;</span>+ test_strong_reference);</span><br><span class="line">        System.out.println(<span class="string">&quot;test - &gt; &quot;</span>+test);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Soft</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 软引用， 用来描述那些还有用， 但是不是必须用的对象， 只被软引用关联着的对象</span></span><br><span class="line"><span class="comment">     * 在系统内存溢出之前，会把这些对象列进入回收范围之内进行二次回收， 如果回收之后</span></span><br><span class="line"><span class="comment">     * 内存还不够的话， 就抛出内存溢出的异常.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 可以在一些内存敏感的地方 进行使用, 高速缓存之类的</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 内存够用的时候就保留软引用的可达对象</span></span><br><span class="line"><span class="comment">     * 内存不够的时候就回收可达对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">cuiyt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;cuiyt&quot;</span>);</span><br><span class="line">        SoftReference&lt;User&gt; reference = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;User&gt;(cuiyt);</span><br><span class="line">        cuiyt = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(reference.get().toString());</span><br><span class="line">        System.gc();</span><br><span class="line">        System.out.println(<span class="string">&quot;after - &gt; &quot;</span> + reference.get().toString());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">7</span>];</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(reference.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Weak</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 弱引用， 发送GC就会被回收掉！ 不管内存够不够</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        WeakReference&lt;User&gt; test = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;User&gt;(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;@cuiyut&quot;</span>));</span><br><span class="line">        System.out.println(test.get());</span><br><span class="line">        System.gc();</span><br><span class="line">        System.out.println(test.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Empty</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Empty empty;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PhantomReference&lt;Empty&gt; reference;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ReferenceQueue&lt;Empty&gt; queue;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="built_in">super</span>.finalize();</span><br><span class="line">        System.out.println(<span class="string">&quot;调用 finalize&quot;</span>);</span><br><span class="line">        empty = <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Check</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="built_in">super</span>.run();</span><br><span class="line">                <span class="keyword">if</span> (reference != <span class="literal">null</span>) &#123;</span><br><span class="line">                    PhantomReference&lt;Empty&gt; test = <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        test = (PhantomReference&lt;Empty&gt;) queue.remove();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (test != <span class="literal">null</span>) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;跟踪垃圾回收过程， Empty 被GC&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 形同虚设的一个引用类型， 当试图从虚引用中获得对象的时候</span></span><br><span class="line"><span class="comment">     * 它总是空的 ！ 为一个对象设置虚引用关联的唯一目的是跟踪垃圾回收的过程</span></span><br><span class="line"><span class="comment">     * 比如: 能在这个对象被回收的时候发出一个通知</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Check</span> <span class="variable">check</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Check</span>();</span><br><span class="line">        check.setDaemon(<span class="literal">true</span>);</span><br><span class="line">        check.start();</span><br><span class="line"></span><br><span class="line">        queue = <span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>&lt;&gt;();</span><br><span class="line">        empty = <span class="keyword">new</span> <span class="title class_">Empty</span>();</span><br><span class="line">        reference = <span class="keyword">new</span> <span class="title class_">PhantomReference</span>&lt;&gt;(empty, queue);</span><br><span class="line">        <span class="comment">// 取消强引用</span></span><br><span class="line">        empty = <span class="literal">null</span>;</span><br><span class="line">        System.out.println(reference.get());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;第一次GC&quot;</span>);</span><br><span class="line">        <span class="comment">// 把回收的对象， 放到引用队列中</span></span><br><span class="line">        System.gc();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">3</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;after 第一次GC&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (empty != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;empty 可用&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;empty 不可用&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;第二次GC&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 取消强引用</span></span><br><span class="line">        empty = <span class="literal">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;after 第二次GC&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (empty != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;empty 可用&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;empty 不可用&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/java/zookeeper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/zookeeper/" class="post-title-link" itemprop="url">Zookeeper</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-14 16:09:14" itemprop="dateCreated datePublished" datetime="2019-03-14T16:09:14+08:00">2019-03-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>按照 <a target="_blank" rel="noopener" href="https://my.oschina.net/yafeiok/blog/618835">zookeeper入门与实战 - yafeiok1的个人空间 - 开源中国</a> 在linux上跑通。</li>
<li>看完后重新看一遍上面的文章。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/liu857279611/article/details/70495413">zookeeper之监听事件总结 - 航天飞哥的博客 - CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.open-open.com/lib/view/open1456154723823.html">zookeeper入门与实战 - 分布式/云计算/大数据 - 服务器软件 - 深度开源</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hujiapeng/p/9019103.html">Zookeeper安装使用及JavaAPI使用 - jiapeng - 博客园</a></p>
<p><a target="_blank" rel="noopener" href="https://m.w3cschool.cn/zookeeper/zookeeper_overview.html">Zookeeper 概述_Zookeeper教程_w3cschool</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/felixzh/p/5869212.html">Zookeeper的功能以及工作原理 - 微信-大数据从业者 - 博客园</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/android/IME%E8%BE%93%E5%85%A5%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/android/IME%E8%BE%93%E5%85%A5%E6%B3%95/" class="post-title-link" itemprop="url">IME输入法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-04 19:01:24" itemprop="dateCreated datePublished" datetime="2019-03-04T19:01:24+08:00">2019-03-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="输入法遮盖-EditText-问题"><a href="#输入法遮盖-EditText-问题" class="headerlink" title="输入法遮盖 EditText 问题"></a>输入法遮盖 EditText 问题</h2><p>修复弹框不能被顶上去的问题： AndroidBug5497Workaround，<br>原代码在部分手机上会有底部导航栏被遮盖的问题，下面的代码可兼容华为、小米，三星等机型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.os.Build;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.FrameLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AndroidBug5497Workaround</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">assistActivity</span><span class="params">(Activity activity)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AndroidBug5497Workaround</span>(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> View mChildOfContent;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> usableHeightPrevious;</span><br><span class="line">    <span class="keyword">private</span> FrameLayout.LayoutParams frameLayoutParams;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> contentHeight;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isfirst</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Activity activity;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> statusBarHeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">AndroidBug5497Workaround</span><span class="params">(Activity activity)</span> &#123;</span><br><span class="line">        <span class="comment">//获取状态栏的高度</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">resourceId</span> <span class="operator">=</span> activity.getResources().getIdentifier(<span class="string">&quot;status_bar_height&quot;</span>, <span class="string">&quot;dimen&quot;</span>, <span class="string">&quot;android&quot;</span>);</span><br><span class="line">        statusBarHeight = activity.getResources().getDimensionPixelSize(resourceId);</span><br><span class="line">        <span class="built_in">this</span>.activity = activity;</span><br><span class="line">        <span class="type">FrameLayout</span> <span class="variable">content</span> <span class="operator">=</span> (FrameLayout) activity.findViewById(android.R.id.content);</span><br><span class="line">        mChildOfContent = content.getChildAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//界面出现变动都会调用这个监听事件</span></span><br><span class="line">        mChildOfContent.getViewTreeObserver().addOnGlobalLayoutListener(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (isfirst) &#123;</span><br><span class="line">                contentHeight = mChildOfContent.getHeight();<span class="comment">//兼容华为等机型</span></span><br><span class="line">                isfirst = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            possiblyResizeChildOfContent();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        frameLayoutParams = (FrameLayout.LayoutParams)</span><br><span class="line">            mChildOfContent.getLayoutParams();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重新调整跟布局的高度</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">possiblyResizeChildOfContent</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">usableHeightNow</span> <span class="operator">=</span> computeUsableHeight();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//当前可见高度和上一次可见高度不一致 布局变动</span></span><br><span class="line">        <span class="keyword">if</span> (usableHeightNow != usableHeightPrevious) &#123;</span><br><span class="line">            <span class="comment">//int usableHeightSansKeyboard2 = mChildOfContent.getHeight();//兼容华为等机型</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">usableHeightSansKeyboard</span> <span class="operator">=</span> mChildOfContent.getRootView().getHeight();</span><br><span class="line">            <span class="type">int</span> <span class="variable">heightDifference</span> <span class="operator">=</span> usableHeightSansKeyboard - usableHeightNow;</span><br><span class="line">            <span class="keyword">if</span> (heightDifference &gt; (usableHeightSansKeyboard / <span class="number">4</span>)) &#123;</span><br><span class="line">                <span class="comment">// keyboard probably just became visible</span></span><br><span class="line">                <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123;</span><br><span class="line">                    <span class="comment">//frameLayoutParams.height = usableHeightSansKeyboard - heightDifference;</span></span><br><span class="line">                    frameLayoutParams.height = usableHeightSansKeyboard - heightDifference + statusBarHeight;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    frameLayoutParams.height = usableHeightSansKeyboard - heightDifference;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                frameLayoutParams.height = contentHeight;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            mChildOfContent.requestLayout();</span><br><span class="line">            usableHeightPrevious = usableHeightNow;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算mChildOfContent可见高度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">computeUsableHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Rect</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rect</span>();</span><br><span class="line">        mChildOfContent.getWindowVisibleDisplayFrame(r);</span><br><span class="line">        <span class="keyword">return</span> (r.bottom - r.top);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">setContentView(R.layout.xxx);</span><br><span class="line">AndroidBug5497Workaround.assistActivity(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/tyk9999tyk/article/details/78457372">android 显示内容被底部导航栏遮挡 - 菜鸟的 android 晋级之路 - CSDN 博客</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a95a1b84da11">关于 AndroidBug5497Workaround 的兼容性问题 - 简书</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/hexo/hexo%E9%9B%86%E6%88%90travis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/hexo/hexo%E9%9B%86%E6%88%90travis/" class="post-title-link" itemprop="url">Hexo集成travis自动部署</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-28 14:13:14" itemprop="dateCreated datePublished" datetime="2019-01-28T14:13:14+08:00">2019-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="自动化前-VS-后"><a href="#自动化前-VS-后" class="headerlink" title="自动化前 VS 后"></a>自动化前 VS 后</h2><h3 id="没有-travis-的流程"><a href="#没有-travis-的流程" class="headerlink" title="没有 travis 的流程"></a>没有 travis 的流程</h3><p>每次写完文章后，要手动运行以下命令部署</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean --config <span class="built_in">source</span>/_data/next.yml &amp;&amp;</span><br><span class="line">hexo g --config <span class="built_in">source</span>/_data/next.yml &amp;&amp;</span><br><span class="line">hexo d --config <span class="built_in">source</span>/_data/next.yml</span><br></pre></td></tr></table></figure>

<h3 id="基于-travis-的自动部署流程"><a href="#基于-travis-的自动部署流程" class="headerlink" title="基于 travis 的自动部署流程"></a>基于 travis 的自动部署流程</h3><p>有了 travis，写好文章后，只需推送代码到 GitHub 仓库。其他的部署操作都由 travis 自动完成：</p>
<ol>
<li>提交并推送代码到 GitHub；</li>
<li>Travis Ci 监听到 GitHub 仓库发生变化，开始依据 <code>.travis.yml</code> 脚本构建项目；</li>
<li>Travis Ci 构建完成后将生成的最终文件推送到 GitHub；</li>
</ol>
<h2 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h2><h3 id="Permission-denied"><a href="#Permission-denied" class="headerlink" title="Permission denied"></a>Permission denied</h3><p>原因：脚本没有运行权限</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./run_d.sh</span><br><span class="line">/home/travis/.travis/job_stages: line 104: ./run_d.sh: Permission denied</span><br><span class="line">The <span class="built_in">command</span> <span class="string">&quot;./run_d.sh&quot;</span> exited with 126.</span><br></pre></td></tr></table></figure>

<p>在 <code>.travis.yml</code>的 <code>before_install:</code>阶段添加<code>x</code>权限：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="string">+x</span> <span class="string">./run_d.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="Permission-denied-publickey"><a href="#Permission-denied-publickey" class="headerlink" title="Permission denied (publickey)"></a>Permission denied (publickey)</h3><p>Q:</p>
<blockquote>
<p>fatal: Could not read from remote repository.<br>Please make sure you have the correct access rights</p>
</blockquote>
<p>A:</p>
<blockquote>
<p>If you want to push via ssh then travis needs to have access to the private part of the ssh key you generated. What you want to do is use the travis cli gem to encrypt the private key, add it to your repo and during the deploy stage decrypt it again and use it. Here’s a <a target="_blank" rel="noopener" href="https://github.com/lyloou/learn-travis/blob/master/encrypted-ssh-keys-deployment.md">step-by-step</a></p>
</blockquote>
<p>为了能将 travis 构建后的文件推送到 github，需要：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下操作匀在客户端</span></span><br><span class="line">sudo apt install ruby</span><br><span class="line">sudo apt install ruby​​-dev</span><br><span class="line">sudo gem install <span class="built_in">tr</span>​​avis</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 生成ssh密钥</span></span><br><span class="line">ssh-keygen -C <span class="string">&quot;lyloou@qq.com&quot;</span> -t rsa -b 2048 -f ~/.ssh/hexo</span><br><span class="line"><span class="comment"># 2. 将公钥内容贴到Github上项目的 「Settings -&gt; Deploy keys -&gt; Add deploy key」</span></span><br><span class="line"><span class="comment"># 3. 登录travis（会自动生成 ~/.travis/config.yml 文件）</span></span><br><span class="line">travis login --auto</span><br><span class="line"><span class="comment"># 4. 在你的项目中运行以下命令，加密刚才生成的私钥，生成 hexo.enc 文件。 （注意提示内容，不要把密钥给提交到仓库了）</span></span><br><span class="line">travis encrypt-file ~/.ssh/hexo --add</span><br></pre></td></tr></table></figure>

<p>上面的第 4 步，做了这几件事：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 加密ssh私钥, 生成一个hexo.enc。这个文档需要放到项目里，上面的输出已经提示了，千万别把原始的私钥放进去了~~</span><br><span class="line">- 相应的解密k/v值以环境变量方式存在Travis CI上, 见Travis CI上项目的「More options -&gt; Settings -&gt; Environment Variables」</span><br><span class="line">- 将解密命令自动写入到本地项目的 .travis.yml 里</span><br></pre></td></tr></table></figure>

<p>加密之后的<code>hexo.enc</code>文件，只有 travis 能解密使用。<br>因为在 login 的时候，将解密的密钥存放到<code>Environment Variables</code>中了，拿不到这个就无法解密还原了。</p>
<p>接着通过 ssh_agent 的方式配置<code>ssh client</code>：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_f9a8a4d68f34_key</span> <span class="string">-iv</span> <span class="string">$encrypted_f9a8a4d68f34_iv</span></span><br><span class="line">    <span class="string">-in</span> <span class="string">wiki.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="string">-d</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">eval</span> <span class="string">$(ssh-agent)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ssh-add</span> <span class="string">~/.ssh/id_rsa</span></span><br></pre></td></tr></table></figure>

<h2 id="最终配置"><a href="#最终配置" class="headerlink" title="最终配置"></a>最终配置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">source</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">apt:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">yarn:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_a685f241ac15_key</span> <span class="string">-iv</span> <span class="string">$encrypted_a685f241ac15_iv</span></span><br><span class="line">    <span class="string">-in</span> <span class="string">hexo.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="string">-d</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">eval</span> <span class="string">$(ssh-agent)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ssh-add</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;$USER_NAME&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;$USER_EMAIL&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">curl</span> <span class="string">-o-</span> <span class="string">-L</span> <span class="string">https://yarnpkg.com/install.sh</span> <span class="string">|</span> <span class="string">bash</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">PATH=$HOME/.yarn/bin:$PATH</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="string">+x</span> <span class="string">./run_d.sh</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./run_d.sh</span></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;oked!&quot;</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">USER_NAME:</span> <span class="string">lyloou</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">USER_EMAIL:</span> <span class="string">lyloou@qq.com</span></span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>在 GitHub 的<code>Readme.md</code>中显示构建结果</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">build-info</span>](<span class="link">https://travis-ci.org/userName/repoName.svg</span>)</span><br></pre></td></tr></table></figure>

<h2 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h2><p>Q: travis-ci node-sass: Command failed.<br>A: <a target="_blank" rel="noopener" href="https://github.com/travis-ci/travis-ci/issues/9561">https://github.com/travis-ci/travis-ci/issues/9561</a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009054888">使用 Travis 自动部署 Hexo 到 Github 与 自己的服务器 - 我的儿子叫酸奶 - SegmentFault 思否</a></li>
<li><a target="_blank" rel="noopener" href="https://hk.saowen.com/a/8edd77efe1c7f306f67e7c71e764ad76184d9ff3675d6dcfc9913d913be24cbd">Simiki 基于 Github Pages 配合 Travis CI 做持续集成 - 扫文资讯</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004667156">用 Travis CI 自动部署 hexo - ac 黄博客精选 - SegmentFault 思否</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/java/%E9%9A%90%E8%97%8F%E7%89%B9%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/%E9%9A%90%E8%97%8F%E7%89%B9%E6%80%A7/" class="post-title-link" itemprop="url">Java隐藏特性</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-26 12:30:13" itemprop="dateCreated datePublished" datetime="2019-01-26T12:30:13+08:00">2019-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="双花括号初始化语法（DoubleBraceInitialization）"><a href="#双花括号初始化语法（DoubleBraceInitialization）" class="headerlink" title="双花括号初始化语法（DoubleBraceInitialization）"></a>双花括号初始化语法（DoubleBraceInitialization）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里解释下这两个括号：</span></span><br><span class="line"><span class="comment">// 第一个括号创建了一个新的匿名内部类，相信这个大家都知道；</span></span><br><span class="line"><span class="comment">// 第二个括号声明了匿名内部类实例化时运行的实例初始化块。</span></span><br><span class="line">removeProductsWithCodeIn(<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;() &#123;&#123;</span><br><span class="line">    add(<span class="string">&quot;XZ13s&quot;</span>);</span><br><span class="line">    add(<span class="string">&quot;AB21/X&quot;</span>);</span><br><span class="line">    add(<span class="string">&quot;YYLEX&quot;</span>);</span><br><span class="line">    add(<span class="string">&quot;AR5E&quot;</span>);</span><br><span class="line"> &#125;&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/lanxuezaipiao/p/3460373.html">Java 你不知道的那些事儿—Java 隐藏特性（上） - Alexia(minmin) - 博客园</a></li>
</ul>
<h3 id="注意：此特性可能存在的问题；"><a href="#注意：此特性可能存在的问题；" class="headerlink" title="注意：此特性可能存在的问题；"></a><strong>注意</strong>：此特性可能存在的问题；</h3><ol>
<li> gson 不能正确解析双花括号语法(<a href="http://lyloou.com/java/%E5%9D%91/">【Java】那些踩过的坑 | 比特楼</a>)</li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000022717457">永远不要使用双花括号初始化实例，否则就会 OOM！ - SegmentFault 思否</a><br> （匿名内部类，可能会导致 OOM）</li>
<li>Caused by: com.esotericsoftware.kryo.KryoException: Class cannot be created (missing no-arg constructor): com.lyloou.jetcache.UserServiceImpl$1<br> This is an anonymous class, which is not serializable by default in Kryo. Possible solutions: 1. Remove uses of anonymous classes, including double brace initialization, from the containing class. This is the safest solution, as anonymous classes don’t have predictable names for serialization.</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/java-concurrent/readme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java-concurrent/readme/" class="post-title-link" itemprop="url">Java并发学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-26 12:30:13" itemprop="dateCreated datePublished" datetime="2019-01-26T12:30:13+08:00">2019-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dolphin0520/category/602384.html">Java 并发编程 - 随笔分类 - 海 子 - 博客园</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dolphin0520/p/3920373.html">Java 并发编程：volatile 关键字解析 - 海 子 - 博客园</a></li>
</ul>
<h2 id="completableFuture"><a href="#completableFuture" class="headerlink" title="completableFuture"></a>completableFuture</h2><p><img src="https://cdn.jsdelivr.net/gh/lyloou/img/readme-2021-07-14-17-10-12.png" alt="readme-2021-07-14-17-10-12"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = nameToContent.keySet().stream()</span><br><span class="line">        .map(name -&gt; CompletableFuture.runAsync(() -&gt; doUploadFile(map, name, nameToContent), executor))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line"><span class="comment">//noinspection ResultOfMethodCallIgnored</span></span><br><span class="line">futureList.stream().map(CompletableFuture::join).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：如果使用 count() 不会阻塞</span></span><br><span class="line"><span class="comment">// futureList.stream().map(CompletableFuture::join).count()</span></span><br></pre></td></tr></table></figure>

<h2 id="线程池如何合理配置"><a href="#线程池如何合理配置" class="headerlink" title="线程池如何合理配置"></a>线程池如何合理配置</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1806245">CPU 密集型 和 IO 密集型 的区别，如何确定线程池大小？ - 云+社区 - 腾讯云</a><br>配置线程池可以从以下几个方面来考虑。</p>
<ul>
<li>任务是 CPU 密集型、IO 密集型或者混合型；</li>
<li>任务优先级，高中低；</li>
<li>任务时间执行长短；</li>
<li>任务依赖性：是否依赖其他系统资源。</li>
</ul>
<hr>
<ul>
<li>CPU 密集型可以配置可能小的线程，比如：N+1 线程。</li>
<li>IO 密集型（网络、磁盘 IO）可以配置较多的线程，如 2n 个线程。</li>
<li>混合型可以拆成 IO 密集型任务和 CPU 密集型任务，计算如下：<blockquote>
<p>最佳线程数目 = （线程等待时间与线程 CPU 时间之比 + 1）* CPU 数目</p>
</blockquote>
</li>
</ul>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line"></span><br><span class="line">假如一个程序平均每个线程<span class="meta">CPU</span>运行时间为<span class="number">0.</span>5s，而线程等待时间（非<span class="meta">CPU</span>运行时间，比如IO）为<span class="number">1.</span>5s，<span class="meta">CPU</span>核心数为<span class="number">8</span>，那么最佳的线程数应该是？</span><br><span class="line">     根据上面这个公式估算得到最佳的线程数：((<span class="number">0.5</span>+<span class="number">1.5</span>)/<span class="number">0.5</span>)*<span class="number">8</span>=<span class="number">32</span>。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>通过<code>Runtime.getRuntime().avaiableProcessors()</code>来获取 cpu 个数。</p>
<h2 id="窃取线程池"><a href="#窃取线程池" class="headerlink" title="窃取线程池"></a>窃取线程池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.thread.ThreadUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecutorOfWorkStealingPoolTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newWorkStealingPool();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Integer.MAX_VALUE; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            <span class="type">int</span> <span class="variable">finalI</span> <span class="operator">=</span> i;</span><br><span class="line">            executorService.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; - &quot;</span> + finalI);</span><br><span class="line">                ThreadUtil.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        ThreadUtil.sleep(<span class="number">1000000</span>);</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/java/%E6%94%BB%E5%85%8B%E7%9B%AE%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/java/%E6%94%BB%E5%85%8B%E7%9B%AE%E6%A0%87/" class="post-title-link" itemprop="url">攻克目标</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-26 11:53:24" itemprop="dateCreated datePublished" datetime="2019-01-26T11:53:24+08:00">2019-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h1><h2 id="Java技术"><a href="#Java技术" class="headerlink" title="Java技术"></a>Java技术</h2><h2 id="主流开发框架"><a href="#主流开发框架" class="headerlink" title="主流开发框架"></a>主流开发框架</h2><p>Spring</p>
<p>Dubbo</p>
<p>Kafka</p>
<p>Redis</p>
<p>Canal</p>
<p>ElasticSearch</p>
<h2 id="相关能力"><a href="#相关能力" class="headerlink" title="相关能力"></a>相关能力</h2><p>分布式、高并发、高可用大型系统架构设计能力和相关经验；<br>极强的产品思维和业务理解能力，熟练掌握软件设计原则；<br>熟悉各类算法、分布式、中间件、服务化框架、负载均衡，相关高性能、高可用系统架构设计成功实践；<br>熟悉流程引擎、规则引擎相关技术的应用，有过多业务场景下的协同系统的开发实践经验；<br>有良好的沟通能力和自我驱动力，具备一定的项目管理能力，能规划中长期架构方向者。</p>
<h1 id="层面："><a href="#层面：" class="headerlink" title="层面："></a>层面：</h1><h2 id="学习阶段"><a href="#学习阶段" class="headerlink" title="学习阶段"></a>学习阶段</h2><ol>
<li>这个技术出现的背景、初衷和要达到什么样的目标或是要解决什么样的问题？</li>
<li>这个技术的优势和劣势分别是什么？</li>
<li>这个技术的适用场景？</li>
<li>技术的组成部分和关键实现？</li>
<li>已有的实现和它之间的对比？</li>
</ol>
<h2 id="实战阶段"><a href="#实战阶段" class="headerlink" title="实战阶段"></a>实战阶段</h2><ol>
<li>基本使用demo</li>
<li>练手项目</li>
<li>真项目</li>
</ol>
<p>高质量的信息和第一手的知识<br>知识连成地图（通过问题来学习，有的放矢）<br>不断反思，与不同年龄的人讨论<br>举一反三，并实践，知识转换成技能。</p>
<p>学习是为了改变自己。<br>坚持是一件反人性的事，所以，它才难能可贵，也更有价值。<br>人不怕笨，怕的是懒，怕的是找到各种理由放弃。<br>坚持也不是要苦苦的坚持，有循环有成就感的坚持才是真正可以持续的。<br>所以一方面：要把你的坚持形成成果晒出来，让别人来给你点赞。<br>另一方面：还要把坚持变成一种习惯，就像吃饭喝水一样，你感觉不到太多的成本付出。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/http/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/http/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" class="post-title-link" itemprop="url">网络学习资料</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-26 11:49:34" itemprop="dateCreated datePublished" datetime="2019-01-26T11:49:34+08:00">2019-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/computer-network-tutorials/">Computer Network Tutorials - GeeksforGeeks</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lyloou.com/python/tool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/images/avatar.png">
      <meta itemprop="name" content="lyloou">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lyloou">
      <meta itemprop="description" content="/* Better than last best */">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | lyloou">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/python/tool/" class="post-title-link" itemprop="url">Python Tool</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-26 10:30:13" itemprop="dateCreated datePublished" datetime="2019-01-26T10:30:13+08:00">2019-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="HTTP-服务"><a href="#HTTP-服务" class="headerlink" title="HTTP 服务"></a>HTTP 服务</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer 8080</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># alias.sh</span></span><br><span class="line">www=<span class="string">&#x27;python -m SimpleHTTPServer 8000&#x27;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/11/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/13/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18151128号 </a>
  </div>

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lyloou</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"lyloou/lyloou.github.io","repo_id":"MDEwOlJlcG9zaXRvcnkxMDk1NzkyNzA=","category":"Announcements","category_id":"DIC_kwDOBogMBs4CWdfR","mapping":"pathname","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"zh-CN","input_position":"bottom","loading":"lazy"}</script>

<script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.page.comments) return;

  NexT.utils.loadComments('.giscus-container')
    .then(() => NexT.utils.getScript('https://giscus.app/client.js', {
      attributes: {
        async                   : true,
        crossOrigin             : 'anonymous',
        'data-repo'             : CONFIG.giscus.repo,
        'data-repo-id'          : CONFIG.giscus.repo_id,
        'data-category'         : CONFIG.giscus.category,
        'data-category-id'      : CONFIG.giscus.category_id,
        'data-mapping'          : CONFIG.giscus.mapping,
        'data-reactions-enabled': CONFIG.giscus.reactions_enabled,
        'data-emit-metadata'    : CONFIG.giscus.emit_metadata,
        'data-theme'            : CONFIG.giscus.theme,
        'data-lang'             : CONFIG.giscus.lang,
        'data-input-position'   : CONFIG.giscus.input_position,
        'data-loading'          : CONFIG.giscus.loading
      },
      parentNode: document.querySelector('.giscus-container')
    }));
});
</script>

</body>
</html>
